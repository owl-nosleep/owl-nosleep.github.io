---
interface Experience {
  year: string;
  title: string;
  description: string;
  type: 'achievement' | 'education' | 'competition' | 'certification';
}

const experiences: Experience[] = [
  {
    year: "2019",
    title: "資策會-台灣少年駭客人才培育營 THITCAMP",
    description: "IOT Hacking",
    type: "education"
  },
  {
    year: "2021",
    title: "NYCU Fintech陽明交通大學財經資訊營隊",
    description: "Rank #1",
    type: "achievement"
  },
  {
    year: "2021",
    title: "Facebook Hacker Cup",
    description: "Qualified",
    type: "competition"
  },
  {
    year: "2022",
    title: "成為白帽駭客2_跟著方丈學滲透測試實務",
    description: "2022學員",
    type: "education"
  },
  {
    year: "2024",
    title: "CEH Certificate",
    description: "Score: 121/125",
    type: "certification"
  },
  {
    year: "2025",
    title: "Google資安人才培育計畫",
    description: "2025 學員",
    type: "education"
  },
  {
    year: "2025",
    title: "成大遊戲設計課程 - 視窗程式設計",
    description: "期末最佳專題",
    type: "achievement"
  },
  {
    year: "2025",
    title: "成大資安社",
    description: "副社長",
    type: "achievement"
  },
  {
    year: "2025",
    title: "Devcore Conference",
    description: "Participant",
    type: "education"
  },
  {
    year: "2025",
    title: "AIS3",
    description: "軟體組",
    type: "education"
  },
  {
    year: "2025",
    title: "成大資安課程：網路安全實務與社會實踐",
    description: "Rank #1（Writeups已公布網站）",
    type: "achievement"
  },
  {
    year: "2025",
    title: "TSCCTF",
    description: "Qualified Rank #4",
    type: "competition"
  },
  {
    year: "2025",
    title: "picoCTF",
    description: "Rank #262（Contributed 4910 points）",
    type: "competition"
  },
  {
    year: "2025",
    title: "AIS3 pre-exam",
    description: "Rank #60",
    type: "competition"
  },
  {
    year: "2025",
    title: "InfoSec CTF",
    description: "總排 Rank #7 / 大專組 Rank #4",
    type: "competition"
  }
];

const getTypeIcon = (type: string) => {
  switch (type) {
    case 'achievement':
      return '🏆';
    case 'education':
      return '📚';
    case 'competition':
      return '🎯';
    case 'certification':
      return '📜';
    default:
      return '✨';
  }
};

const getTypeColor = (type: string) => {
  switch (type) {
    case 'achievement':
      return 'text-yellow-600 dark:text-yellow-400';
    case 'education':
      return 'text-blue-600 dark:text-blue-400';
    case 'competition':
      return 'text-green-600 dark:text-green-400';
    case 'certification':
      return 'text-purple-600 dark:text-purple-400';
    default:
      return 'text-gray-600 dark:text-gray-400';
  }
};
---

<div class="timeline-container">
  <h2 class="text-2xl font-bold mb-8 text-center">🚀 我的經歷時間線</h2>
  
  <div class="relative">
    <!-- 中央漸變時間線 -->
    <div class="timeline-line absolute left-1/2 transform -translate-x-1/2 h-full w-1 rounded-full shadow-lg"></div>
    
    {experiences.map((exp, index) => (
      <div class={`timeline-item flex items-center mb-12 ${index % 2 === 0 ? 'flex-row' : 'flex-row-reverse'}`}>
        <!-- 增強的年份圓點 -->
        <div class="timeline-dot absolute left-1/2 transform -translate-x-1/2 w-8 h-8 bg-white dark:bg-gray-800 border-4 border-blue-500 rounded-full flex items-center justify-center shadow-xl z-10">
          <div class="w-3 h-3 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"></div>
        </div>
        
        <!-- 增強的內容卡片 -->
        <div class={`timeline-content w-5/12 ${index % 2 === 0 ? 'mr-auto pr-8' : 'ml-auto pl-8'}`}>
          <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-100 dark:border-gray-700">
            <!-- 年份標籤 -->
            <div class="timeline-year text-sm font-bold text-blue-600 dark:text-blue-400 mb-3 flex items-center">
              <span class="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>
              {exp.year}
            </div>
            
            <!-- 標題 -->
            <h3 class="timeline-title text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center leading-snug">
              <span class="mr-3 text-2xl filter drop-shadow-lg">{getTypeIcon(exp.type)}</span>
              <span class="flex-1">{exp.title}</span>
            </h3>
            
            <!-- 描述 -->
            <p class={`timeline-description text-sm ${getTypeColor(exp.type)} font-medium mb-4 leading-relaxed`}>
              {exp.description}
            </p>
            
            <!-- 增強的類型標籤 -->
            <div class="mt-4">
              <span class={`type-badge inline-block px-4 py-2 text-xs font-bold rounded-full shadow-md ${
                exp.type === 'achievement' ? 'bg-gradient-to-r from-yellow-400 to-orange-400 text-white' :
                exp.type === 'education' ? 'bg-gradient-to-r from-blue-400 to-indigo-400 text-white' :
                exp.type === 'competition' ? 'bg-gradient-to-r from-green-400 to-emerald-400 text-white' :
                'bg-gradient-to-r from-purple-400 to-pink-400 text-white'
              }`}>
                {exp.type === 'achievement' ? '🏆 成就' :
                 exp.type === 'education' ? '📚 學習' :
                 exp.type === 'competition' ? '🎯 競賽' : '📜 認證'}
              </span>
            </div>
          </div>
        </div>
      </div>
    ))}
  </div>
</div>

<style>
  .timeline-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  .timeline-item {
    position: relative;
    min-height: 120px;
    opacity: 0;
    animation: fadeInUp 0.8s ease-out forwards;
  }

  .timeline-item:nth-child(odd) {
    animation-delay: 0.1s;
  }

  .timeline-item:nth-child(even) {
    animation-delay: 0.2s;
  }

  .timeline-content {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }

  .timeline-content::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.8s;
  }

  .timeline-content:hover::before {
    left: 100%;
  }

  .timeline-content:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
  }

  .timeline-dot {
    transition: all 0.3s ease;
    animation: pulse 2s infinite;
  }

  .timeline-item:hover .timeline-dot {
    transform: translate(-50%, -50%) scale(1.3);
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes pulse {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
    }
    50% {
      box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
    }
  }

  .timeline-year {
    animation: slideInLeft 0.6s ease-out;
  }

  .timeline-title {
    animation: slideInRight 0.8s ease-out;
  }

  .timeline-description {
    animation: fadeIn 1s ease-out;
  }

  @keyframes slideInLeft {
    from { transform: translateX(-20px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }

  @keyframes slideInRight {
    from { transform: translateX(20px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* 響應式設計 */
  @media (max-width: 768px) {
    .timeline-item {
      flex-direction: column !important;
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .timeline-content {
      width: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      margin-top: 1rem !important;
    }
    
    .timeline-dot {
      position: relative !important;
      left: auto !important;
      transform: none !important;
      margin: 0 auto 1rem auto;
      display: block;
    }
    
    /* 移動端隱藏中央線 */
    .timeline-container > .relative > .absolute {
      display: none;
    }
  }

  /* 深色模式增強 */
  @media (prefers-color-scheme: dark) {
    .timeline-content {
      background: rgba(31, 41, 55, 0.9);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(75, 85, 99, 0.3);
    }
    
    .timeline-content:hover {
      background: rgba(31, 41, 55, 0.95);
      border-color: rgba(59, 130, 246, 0.5);
    }
  }

  /* 漸變線條增強 */
  .timeline-line {
    background: linear-gradient(
      to bottom,
      #3b82f6 0%,
      #8b5cf6 25%,
      #ec4899 50%,
      #f59e0b 75%,
      #10b981 100%
    );
    animation: gradientShift 8s ease-in-out infinite;
  }

  @keyframes gradientShift {
    0%, 100% { opacity: 0.8; }
    50% { opacity: 1; }
  }

  /* 類型標籤動畫 */
  .type-badge {
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .type-badge::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.6s;
  }

  .timeline-content:hover .type-badge::before {
    left: 100%;
  }
</style>
